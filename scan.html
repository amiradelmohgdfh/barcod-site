<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ø³Ú©Ù† Ø¨Ø§Ø±Ú©Ø¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: sans-serif;
      direction: rtl;
      text-align: center;
      padding: 25px;
    }
    button {
      font-size: 18px;
      padding: 12px 20px;
      cursor: pointer;
    }
    input {
      display: none;
    }
    ul {
      margin-top: 20px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      text-align: right;
    }
  </style>
</head>

<body>

<h2>Ø§Ø³Ú©Ù† Ø¨Ø§Ø±Ú©Ø¯</h2>
<p>Ø¯Ú©Ù…Ù‡ Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ØŒ Ø¹Ú©Ø³ Ø¨Ú¯ÛŒØ±ÛŒØ¯ØŒ Ø¨Ø§Ø±Ú©Ø¯ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>

<!-- Ø¯Ú©Ù…Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ -->
<button onclick="openCamera()">ğŸ“· Ú¯Ø±ÙØªÙ† Ø¹Ú©Ø³</button>

<!-- ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø®ÙÛŒ -->
<input
  type="file"
  id="cameraInput"
  accept="image/*"
  capture="environment"
/>

<h3>Ù„ÛŒØ³Øª Ø§Ø³Ú©Ù†â€ŒÙ‡Ø§</h3>
<ul id="list"></ul>

<script>
  const input = document.getElementById("cameraInput");
  const list = document.getElementById("list");

  let saved = JSON.parse(localStorage.getItem("barcodes")) || [];

  function show() {
    list.innerHTML = "";
    saved.forEach((item, i) => {
      const li = document.createElement("li");
      li.textContent = (i + 1) + " - " + item;
      list.appendChild(li);
    });
  }

  function openCamera() {
    input.click();
  }

  input.addEventListener("change", () => {
    if (!input.files[0]) return;

    // ÙØ¹Ù„Ø§Ù‹ ÙÙ‚Ø· Ø«Ø¨Øª Ø¹Ú©Ø³ (Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ Ø§Ø³Ú©Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
    const time = new Date().toLocaleString();
    saved.push("Ø¹Ú©Ø³ Ø«Ø¨Øª Ø´Ø¯ - " + time);
    localStorage.setItem("barcodes", JSON.stringify(saved));
    show();
  });

  show();
</script>

</body>
</html>
